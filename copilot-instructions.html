<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>GitHub Copilot Instructions for buoyant • buoyant</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="GitHub Copilot Instructions for buoyant"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">buoyant</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="articles/buoyant.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/advanced-usage.html">Advanced Usage</a></li>
    <li><a class="dropdown-item" href="articles/troubleshooting.html">Troubleshooting</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/posit-dev/buoyant/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>GitHub Copilot Instructions for buoyant</h1>
      <small class="dont-index">Source: <a href="https://github.com/posit-dev/buoyant/blob/main/.github/copilot-instructions.md" class="external-link"><code>.github/copilot-instructions.md</code></a></small>
    </div>

<div id="github-copilot-instructions-for-buoyant" class="section level1">

<p>The buoyant package provides tools for deploying <code>_server.yml</code> compliant web applications to DigitalOcean. It supports any R web framework that implements the <code>_server.yml</code> standard (plumber2, fiery, etc.). This R package follows standard R package development practices using the devtools ecosystem.</p>
<p><strong>CRITICAL: Always follow these instructions first and only fallback to additional search and context gathering if the information in these instructions is incomplete or found to be in error.</strong></p>
<div class="section level2">
<h2 id="working-effectively">Working Effectively<a class="anchor" aria-label="anchor" href="#working-effectively"></a></h2>
<div class="section level3">
<h3 id="essential-setup-commands">Essential Setup Commands<a class="anchor" aria-label="anchor" href="#essential-setup-commands"></a></h3>
<p>Install required R and development dependencies:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Install R if not available (Ubuntu/Debian)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-base r-base-dev build-essential libcurl4-openssl-dev libssl-dev libxml2-dev libssh2-1-dev</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># Install core R packages via apt (faster than CRAN for basic packages)</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-cran-yaml r-cran-jsonlite r-cran-lifecycle r-cran-testthat</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># Install additional development packages if available via apt</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-cran-devtools r-cran-knitr r-cran-rmarkdown</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co"># If packages not available via apt, install via CRAN (may fail if network restricted)</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages(c('analogsea', 'ssh', 'devtools', 'pkgdown'), repos='https://cloud.r-project.org/')"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="build-and-development-commands">Build and Development Commands<a class="anchor" aria-label="anchor" href="#build-and-development-commands"></a></h3>
<p>Always run these commands from the package root directory:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Install package from source (basic development workflow)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># TIMING: ~3-5 seconds</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages('.', type = 'source', repos = NULL)"</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># Generate documentation from roxygen2 comments (if devtools available)</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"devtools::document()"</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># Build source package without vignettes (fastest option)</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co"># TIMING: ~0.3 seconds - VERY FAST</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="ex">R</span> CMD build <span class="at">--no-build-vignettes</span> .</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># Basic R CMD check (without tests/vignettes to avoid missing dependencies)</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co"># TIMING: ~12-15 seconds - NEVER CANCEL, Set timeout to 30+ seconds</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>false <span class="ex">R</span> CMD check <span class="at">--no-vignettes</span> <span class="at">--no-tests</span> buoyant_<span class="pp">*</span>.tar.gz</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co"># Full R CMD check with devtools (if available)</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co"># NEVER CANCEL: Takes 5-15 minutes with all dependencies. Set timeout to 20+ minutes.</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"devtools::check()"</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co"># Run unit tests directly from source</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co"># TIMING: ~5-8 seconds - NEVER CANCEL, Set timeout to 30+ seconds</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(testthat); library(buoyant); test_dir('tests/testthat')"</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co"># Run unit tests using devtools (if available)</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"devtools::test()"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="testing-commands">Testing Commands<a class="anchor" aria-label="anchor" href="#testing-commands"></a></h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Run full test suite from source directory</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># TIMING: ~5-8 seconds - NEVER CANCEL, Set timeout to 30+ seconds</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(testthat); library(buoyant); test_dir('tests/testthat')"</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co"># Run single test file</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(testthat); library(buoyant); test_file('tests/testthat/test-validate.R')"</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co"># Check if package loads correctly</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(buoyant)"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="documentation-commands">Documentation Commands<a class="anchor" aria-label="anchor" href="#documentation-commands"></a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Build package documentation website (if pkgdown available)</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># NEVER CANCEL: Takes 3-8 minutes. Set timeout to 15+ minutes.</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"pkgdown::build_site()"</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co"># Render vignette (if knitr/rmarkdown available)</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"rmarkdown::render('vignettes/buoyant.qmd')"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="validation-requirements">Validation Requirements<a class="anchor" aria-label="anchor" href="#validation-requirements"></a></h2>
<div class="section level3">
<h3 id="always-test-these-scenarios-after-making-changes">Always Test These Scenarios After Making Changes:<a class="anchor" aria-label="anchor" href="#always-test-these-scenarios-after-making-changes"></a></h3>
<ol style="list-style-type: decimal"><li>
<p><strong>Basic Package Loading</strong>: Verify the package loads without errors</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://posit-dev.github.io/buoyant/">buoyant</a></span><span class="op">)</span></span>
<span><span class="co"># Should load successfully with all dependencies</span></span></code></pre></div>
</li>
<li>
<p><strong>Validation Functions</strong>: Test _server.yml validation</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://posit-dev.github.io/buoyant/">buoyant</a></span><span class="op">)</span></span>
<span><span class="co"># Test validation on a valid _server.yml file</span></span>
<span><span class="fu"><a href="reference/validate_server_yml.html">validate_server_yml</a></span><span class="op">(</span><span class="st">"path/to/app"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Integration Testing</strong>: Verify core dependencies work together</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pachadotdev/analogsea" class="external-link">analogsea</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/ssh/" class="external-link">ssh</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yaml.r-lib.org" class="external-link">yaml</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jeroen.r-universe.dev/jsonlite" class="external-link">jsonlite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://posit-dev.github.io/buoyant/">buoyant</a></span><span class="op">)</span></span>
<span><span class="co"># All should load without conflicts</span></span></code></pre></div>
</li>
</ol></div>
<div class="section level3">
<h3 id="mandatory-pre-commit-checks">Mandatory Pre-Commit Checks:<a class="anchor" aria-label="anchor" href="#mandatory-pre-commit-checks"></a></h3>
<p><strong>CRITICAL</strong>: Run these validation steps before committing any changes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># 1. Build package to check for syntax/dependency errors</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># TIMING: ~0.3 seconds - VERY FAST</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="ex">R</span> CMD build <span class="at">--no-build-vignettes</span> .</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="co"># 2. Install package to verify it works</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># TIMING: ~3-5 seconds</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages('.', type = 'source', repos = NULL)"</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co"># 3. Test package loading</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co"># TIMING: ~1-2 seconds</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(buoyant)"</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co"># 4. Run test suite if testthat is available</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co"># TIMING: ~5-8 seconds - NEVER CANCEL</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(testthat); library(buoyant); test_dir('tests/testthat')"</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="co"># 5. Full check if time permits (optional but recommended)</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co"># TIMING: ~12-15 seconds - NEVER CANCEL, Set timeout to 30+ seconds</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>false <span class="ex">R</span> CMD check <span class="at">--no-vignettes</span> <span class="at">--no-tests</span> buoyant_<span class="pp">*</span>.tar.gz</span></code></pre></div>
<p><strong>Expected timing summary</strong>:</p>
<ul><li>Basic build: ~0.3 seconds - <strong>INSTANT</strong>
</li>
<li>Package install: ~3-5 seconds - <strong>VERY FAST</strong>
</li>
<li>Test suite: ~5-8 seconds - <strong>NEVER CANCEL, timeout 30+ seconds</strong>
</li>
<li>Basic check: ~12-15 seconds - <strong>NEVER CANCEL, timeout 30+ seconds</strong>
</li>
<li>Full devtools::check(): 5-15 minutes - <strong>NEVER CANCEL, timeout 20+ minutes</strong>
</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="repository-structure">Repository Structure<a class="anchor" aria-label="anchor" href="#repository-structure"></a></h2>
<div class="section level3">
<h3 id="core-development-files">Core Development Files:<a class="anchor" aria-label="anchor" href="#core-development-files"></a></h3>
<ul><li>
<code>R/</code> - Main R source code (validate.R, digital-ocean.R, utils.R)</li>
<li>
<code>tests/testthat/</code> - Unit tests using testthat framework</li>
<li>
<code>vignettes/</code> - Package documentation (buoyant.qmd)</li>
<li>
<code>inst/server/</code> - Server configuration templates (nginx.conf, nginx-ssl.conf)</li>
<li>
<code>man/</code> - Generated documentation (do not edit manually)</li>
</ul></div>
<div class="section level3">
<h3 id="key-architecture-components">Key Architecture Components:<a class="anchor" aria-label="anchor" href="#key-architecture-components"></a></h3>
<ul><li>
<strong>Validation Functions</strong> (<code>R/validate.R</code>): _server.yml validation and parsing</li>
<li>
<strong>Deployment Functions</strong> (<code>R/digital-ocean.R</code>): DigitalOcean provisioning and deployment</li>
<li>
<strong>Utility Functions</strong> (<code>R/utils.R</code>): Helper functions and internal utilities</li>
</ul></div>
<div class="section level3">
<h3 id="dependencies-auto-installed-via-devtools">Dependencies (Auto-installed via devtools):<a class="anchor" aria-label="anchor" href="#dependencies-auto-installed-via-devtools"></a></h3>
<ul><li>
<strong>Core</strong>: analogsea (&gt;= 0.9.4), ssh, yaml, jsonlite, lifecycle</li>
<li>
<strong>Development</strong>: testthat, devtools, knitr, rmarkdown</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="package-functionality">Package Functionality<a class="anchor" aria-label="anchor" href="#package-functionality"></a></h2>
<div class="section level3">
<h3 id="core-deployment-workflow">Core Deployment Workflow:<a class="anchor" aria-label="anchor" href="#core-deployment-workflow"></a></h3>
<ol style="list-style-type: decimal"><li>User creates <code>_server.yml</code> compliant application locally</li>
<li>User validates <code>_server.yml</code> with <code><a href="reference/validate_server_yml.html">validate_server_yml()</a></code>
</li>
<li>User provisions DigitalOcean droplet with <code><a href="reference/do_provision.html">do_provision()</a></code>
</li>
<li>Package uploads files to <code>/var/server-apps/&lt;path&gt;/</code>
</li>
<li>Package installs engine package (plumber2, fiery, etc.)</li>
<li>Package creates systemd service that runs <code>launch_server()</code>
</li>
<li>Package configures nginx reverse proxy</li>
<li>Application is accessible via <code>do_ip(droplet, "/path")</code>
</li>
</ol></div>
<div class="section level3">
<h3 id="supported-engines">Supported Engines:<a class="anchor" aria-label="anchor" href="#supported-engines"></a></h3>
<p>The package works with any R package that implements the <code>_server.yml</code> standard:</p>
<ul><li>
<strong>plumber2</strong>: Modern plumber API framework</li>
<li>
<strong>fiery</strong>: Flexible web server framework</li>
<li>Any custom engine implementing <code>launch_server()</code> function</li>
</ul></div>
<div class="section level3">
<h3 id="configuration-standard">Configuration Standard:<a class="anchor" aria-label="anchor" href="#configuration-standard"></a></h3>
<p>The <code>_server.yml</code> file must include:</p>
<ul><li>
<code>engine</code>: Package name implementing launch_server()</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="common-development-tasks">Common Development Tasks<a class="anchor" aria-label="anchor" href="#common-development-tasks"></a></h2>
<div class="section level3">
<h3 id="adding-new-functions">Adding New Functions:<a class="anchor" aria-label="anchor" href="#adding-new-functions"></a></h3>
<ol style="list-style-type: decimal"><li>Add function to appropriate R file in <code>R/</code> directory</li>
<li>Document with roxygen2 comments (use <code>@export</code> if public)</li>
<li>Run <code>devtools::document()</code> to update NAMESPACE and man pages</li>
<li>Add tests in <code>tests/testthat/test-[function-area].R</code>
</li>
<li>Run <code>devtools::test()</code> to verify tests pass</li>
<li>Run <code>devtools::check()</code> for full validation</li>
</ol></div>
<div class="section level3">
<h3 id="working-with-nginx-configs">Working with Nginx Configs:<a class="anchor" aria-label="anchor" href="#working-with-nginx-configs"></a></h3>
<p>The package includes nginx configuration templates in <code>inst/server/</code>:</p>
<ul><li>
<code>nginx.conf</code>: HTTP reverse proxy configuration</li>
<li>
<code>nginx-ssl.conf</code>: HTTPS configuration with Let’s Encrypt</li>
</ul><p>These are deployed by <code><a href="reference/do_deploy_server.html">do_deploy_server()</a></code> and <code><a href="reference/do_configure_https.html">do_configure_https()</a></code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a></h2>
<div class="section level3">
<h3 id="common-issues">Common Issues:<a class="anchor" aria-label="anchor" href="#common-issues"></a></h3>
<ul><li>
<p><strong>Missing Dependencies</strong>: Install core packages via apt first, then try CRAN for others</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> r-cran-yaml r-cran-jsonlite r-cran-testthat</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># analogsea and ssh need to be installed from CRAN</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages(c('analogsea', 'ssh'), repos='https://cloud.r-project.org/')"</span></span></code></pre></div>
</li>
<li><p><strong>Package Won’t Load</strong>: Reinstall from source: <code>sudo R -e "install.packages('.', type = 'source', repos = NULL)"</code></p></li>
<li><p><strong>devtools Not Available</strong>: Use R CMD directly for basic operations</p></li>
<li><p><strong>Test Failures</strong>: Ensure package is installed: tests need the package loaded</p></li>
<li><p><strong>Build Failures</strong>: Check DESCRIPTION file dependencies match actual imports</p></li>
</ul></div>
<div class="section level3">
<h3 id="alternative-commands-when-devtools-unavailable">Alternative Commands When devtools Unavailable:<a class="anchor" aria-label="anchor" href="#alternative-commands-when-devtools-unavailable"></a></h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Use R CMD instead of devtools equivalents:</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">R</span> CMD build <span class="at">--no-build-vignettes</span> .                    <span class="co"># instead of devtools::build()</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="va">_R_CHECK_FORCE_SUGGESTS_</span><span class="op">=</span>false <span class="ex">R</span> CMD check <span class="at">--no-vignettes</span> <span class="at">--no-tests</span> <span class="pp">*</span>.tar.gz  <span class="co"># instead of devtools::check()</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">"library(testthat); test_dir('tests/testthat')"</span>  <span class="co"># instead of devtools::test()</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages('.', type='source', repos=NULL)"</span>  <span class="co"># instead of devtools::install()</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="networkcran-issues">Network/CRAN Issues:<a class="anchor" aria-label="anchor" href="#networkcran-issues"></a></h3>
<p>If CRAN mirrors are unavailable, use apt packages or local installation:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Prefer apt packages over CRAN when possible</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">sudo</span> apt-cache search r-cran- <span class="kw">|</span> <span class="fu">grep</span> <span class="op">&lt;</span>package_name<span class="op">&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Force local installation without network</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">sudo</span> R <span class="at">-e</span> <span class="st">"install.packages('.', type='source', repos=NULL)"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="digitalocean-authentication">DigitalOcean Authentication:<a class="anchor" aria-label="anchor" href="#digitalocean-authentication"></a></h3>
<p>The package uses <code>analogsea</code> for DigitalOcean API access:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up authentication</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pachadotdev/analogsea" class="external-link">analogsea</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://pacha.dev/analogsea/reference/do_oauth.html" class="external-link">do_oauth</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Opens browser for authentication</span></span>
<span></span>
<span><span class="co"># Or use API token</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>DO_PAT <span class="op">=</span> <span class="st">"your_token_here"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="important-files-reference">Important Files Reference<a class="anchor" aria-label="anchor" href="#important-files-reference"></a></h2>
<div class="section level3">
<h3 id="repository-structure-1">Repository Structure:<a class="anchor" aria-label="anchor" href="#repository-structure-1"></a></h3>
<ul><li>
<strong>Root</strong>: <code>.Rbuildignore</code>, <code>.github/</code>, <code>.gitignore</code>, <code>CLAUDE.md</code>, <code>DESCRIPTION</code>, <code>LICENSE</code>, <code>LICENSE.md</code>, <code>NAMESPACE</code>, <code>NEWS.md</code>, <code>R/</code>, <code>README.md</code>, <code>buoyant.Rproj</code>, <code>inst/</code>, <code>man/</code>, <code>tests/</code>, <code>vignettes/</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="r-source-files-r-directory">R Source Files (<code>R/</code> directory):<a class="anchor" aria-label="anchor" href="#r-source-files-r-directory"></a></h3>
<ul><li>
<code>validate.R</code> - _server.yml validation and parsing functions</li>
<li>
<code>digital-ocean.R</code> - DigitalOcean deployment and provisioning functions</li>
<li>
<code>utils.R</code> - Utility functions and helpers</li>
</ul></div>
<div class="section level3">
<h3 id="test-files-teststestthat-directory">Test Files (<code>tests/testthat/</code> directory):<a class="anchor" aria-label="anchor" href="#test-files-teststestthat-directory"></a></h3>
<ul><li>
<code>test-validate.R</code> - Tests for validation functions</li>
</ul></div>
<div class="section level3">
<h3 id="server-configuration-files-instserver-directory">Server Configuration Files (<code>inst/server/</code> directory):<a class="anchor" aria-label="anchor" href="#server-configuration-files-instserver-directory"></a></h3>
<ul><li>
<code>nginx.conf</code> - HTTP reverse proxy configuration</li>
<li>
<code>nginx-ssl.conf</code> - HTTPS configuration with SSL</li>
</ul><p><strong>Remember</strong>: This is a deployment package that interacts with external services (DigitalOcean) and modifies remote servers. Always consider security implications, API rate limits, and proper error handling when making changes. Test deployment functions carefully in isolated environments.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Barret Schloerke, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

